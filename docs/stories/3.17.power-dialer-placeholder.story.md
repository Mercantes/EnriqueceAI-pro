# Story 3.17: Power Dialer (Placeholder + UI)

## Status

**Done**

## Executor Assignment

executor: "@dev"
quality_gate: "@architect"
quality_gate_tools: ["lint", "typecheck", "test", "build"]

## Complexity Estimate

**S (3 points)** ‚Äî UI placeholder com controles visuais.

## Risks

- **R1:** UX de "Em breve" precisa ser clara para n√£o frustrar o usu√°rio

## Story

**As a** SDR,
**I want** uma tab Power Dialer na tela de execu√ß√£o com UI de fila de discagem,
**so that** eu possa visualizar como ser√° o fluxo de discagem autom√°tica quando a integra√ß√£o VoIP estiver dispon√≠vel.

## Scope

**IN:**
- Tab Power Dialer na tela de execu√ß√£o
- UI de fila de discagem com controles visuais
- Banner "Em breve"
- Pode ser feature flag desabilitada

**OUT:**
- Integra√ß√£o VoIP real (Twilio/Vonage)
- Discagem autom√°tica
- Grava√ß√£o de chamadas
- Transfer√™ncia de chamadas
- Qualquer backend de telefonia

## Acceptance Criteria

1. Tab "Power Dialer" vis√≠vel na tela de execu√ß√£o (ao lado de "Execu√ß√£o")
2. Conte√∫do da tab: banner "Em breve ‚Äî Integra√ß√£o com provedor VoIP"
3. UI mockup: lista de leads para discagem com avatar + nome + telefone
4. Controles visuais (n√£o funcionais): Play, Pause, Skip
5. Status placeholder por lead: "Aguardando", "Em chamada", "Conclu√≠do"
6. Feature flag: pode ser ocultada via config se necess√°rio

## ü§ñ CodeRabbit Integration

> **CodeRabbit Integration**: Disabled
>
> CodeRabbit CLI is not enabled in `core-config.yaml`.
> Quality validation will use manual review process only.
> To enable, set `coderabbit_integration.enabled: true` in core-config.yaml

## Tasks / Subtasks

- [x] **Task 1: Power Dialer UI** (AC: 1, 2, 3, 4, 5)
  - [x] 1.1 Componente `PowerDialerTab.tsx`
  - [x] 1.2 Banner "Em breve" com √≠cone Zap e texto explicativo VoIP
  - [x] 1.3 Mockup de fila: lista de 5 leads placeholder com avatar + nome + telefone
  - [x] 1.4 Controles visuais: Play, Pause, Skip (Button disabled com Tooltip "Em breve")
  - [x] 1.5 Status badges por lead: "Aguardando" (cinza), "Em chamada" (verde), "Conclu√≠do" (azul)

- [x] **Task 2: Integrar na tela de execu√ß√£o** (AC: 1)
  - [x] 2.1 Tab "Power Dialer" j√° existia no ActivityQueueView ‚Äî substitu√≠do placeholder por PowerDialerTab
  - [x] 2.2 Renderiza PowerDialerTab quando selecionada

- [x] **Task 3: Feature flag** (AC: 6)
  - [x] 3.1 Prop `showPowerDialer` no ActivityQueueView (default: true)
  - [x] 3.2 Quando false, tab e conte√∫do do Power Dialer s√£o ocultados

- [x] **Task 4: Testes**
  - [x] 4.1 Teste para PowerDialerTab render (banner, leads, controls, badges, avatars) ‚Äî 7 testes
  - [x] 4.2 Teste para banner "Em breve" presente
  - [x] 4.3 Teste para controles desabilitados

## Dev Notes

**Depend√™ncia:** Story 3.8 (tela de execu√ß√£o com tabs j√° existe).

**UX:** O objetivo √© mostrar ao usu√°rio o que est√° por vir, n√£o entregar funcionalidade real. Usar design system Flux (cores, tipografia, componentes shadcn/ui) para manter consist√™ncia.

**Meetime Reference:** Screenshot 6 ‚Äî Tab "Power Dialer" na tela de execu√ß√£o

### Testing

- **Framework:** Vitest + Testing Library
- **Location:** `src/features/activities/**/*.test.ts`
- **Rodar:** `pnpm vitest run src/features/activities`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-21 | 1.0 | Story criada a partir do Epic 3 | @sm (River) |
| 2026-02-21 | 1.1 | Valida√ß√£o GO (10/10) ‚Äî status Draft ‚Üí Ready | @po (Pax) |
| 2026-02-21 | 2.0 | Implementa√ß√£o completa ‚Äî PowerDialerTab, feature flag, 7 testes | @dev (Dex) |

## Dev Agent Record

### Agent Model Used
Claude Opus 4.6

### Debug Log References
- TooltipProvider needed for tests ‚Äî wrapped with `<TooltipProvider>` in test render helper
- Ternary syntax error in ActivityQueueView ‚Äî simplified to two-branch ternary (dialer vs execution)

### Completion Notes List
- PowerDialerTab: banner "Em breve" com √≠cone Zap, fila de 5 leads mockados, controles Play/Pause/Skip desabilitados
- Lead avatars com iniciais, status badges coloridos (Aguardando/Em chamada/Conclu√≠do)
- Feature flag via prop `showPowerDialer` (default true) no ActivityQueueView
- Substituiu placeholder simples por UI completa
- 7 testes: banner, leads, phones, badges, disabled controls, avatars

### File List
- `src/features/activities/components/PowerDialerTab.tsx` ‚Äî NEW
- `src/features/activities/components/PowerDialerTab.test.tsx` ‚Äî NEW
- `src/features/activities/components/ActivityQueueView.tsx` ‚Äî MODIFIED (import PowerDialerTab, showPowerDialer prop, conditional rendering)
